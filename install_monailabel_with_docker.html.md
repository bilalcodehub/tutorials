# Installing MONAILabel with Docker for Endoscopic Video Analysis


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

### Step 1: Pulling the MONAILabel Docker Image

Rather than installing MONAILabel via `pip`, we will pull the latest
Docker image of MONAILabel, which includes all dependencies and tools
pre-installed.

1.  **Pull the MONAILabel Docker Image**: Open your terminal and run the
    following command to pull the MONAILabel Docker image:

    ``` bash
    !docker pull projectmonai/monailabel:latest
    ```

    This will download the latest MONAILabel image from Docker Hub. The
    image includes all the necessary libraries and tools required to run
    MONAILabel.

2.  **Verify the Image**: After pulling the image, verify that it has
    been downloaded successfully:

    ``` bash
    !docker images
    ```

    You should see `projectmonai/monailabel` listed among your available
    images.

### Step 2: Running the MONAILabel Container with CVAT and GPU Support

Now that the Docker image has been downloaded, we need to run it with
the appropriate volume mappings to ensure persistence of data, GPU
support, and communication with CVAT.

1.  **Run MONAILabel with GPU and Mapped Volumes**: Use the following
    command to run MONAILabel, mapping both the `datasets` and `apps`
    directories, as well as enabling GPU support and communication with
    CVAT:

    ``` bash
    docker run -it --rm --gpus all --ipc=host --net=host \
        -p 8080:8080 \
        -p 8000:8000 \
        -v /home/exsdatalab/data/endo:/opt/monai/datasets \
        -v /home/exsdatalab/data/apps:/opt/monai/apps \
        projectmonai/monailabel:latest bash
    ```

    Here’s a breakdown of the command:

    - `-it`: Runs the container in interactive mode with a terminal.
    - `--rm`: Automatically removes the container after it stops.
    - `--gpus all`: Allocates all available GPUs to the container for AI
      and machine learning tasks.
    - `--ipc=host`: Shares the host’s IPC (inter-process communication)
      namespace with the container.
    - `--net=host`: Shares the host’s network configuration with the
      container.
    - `-p 8080:8080`: Maps port 8080 on the host to port 8080 in the
      container for CVAT.
    - `-p 8000:8000`: Maps port 8000 on the host to port 8000 in the
      container for MONAILabel.
    - `-v /home/exsdatalab/data/endo:/opt/monai/datasets`: Maps the
      local `datasets` folder to the container for persistent data
      storage.
    - `-v /home/exsdatalab/data/apps:/opt/monai/apps`: Maps the local
      `apps` folder to store and modify MONAILabel applications.

2.  **Access the MONAILabel Server**: Once the container is running, you
    can access the MONAILabel server by opening a browser and navigating
    to:

        http://localhost:8000

    This will bring up the MONAILabel interface, and CVAT can
    communicate with MONAILabel via port 8080 for machine
    learning-assisted annotations.

### Step 3: Downloading the Endoscopy App

MONAILabel supports a variety of apps tailored to different medical
tasks. The **Endoscopy Tool Tracking** app is one of the key
applications used for tracking surgical instruments in endoscopic
videos. We will download and prepare this app for use with MONAILabel.

1.  **Download the Endoscopy App**: In your terminal, run the following
    command to download the Endoscopy app into the `apps` directory:

    ``` bash
    !docker exec -it <container_id> monailabel apps --download --name endoscopy --output /workspace/apps
    ```

    Replace `<container_id>` with the actual ID of your running
    MONAILabel container (which you can get by running `docker ps`).
    This command downloads the Endoscopy app into the `/workspace/apps`
    folder inside the container, which is mapped to your local `apps`
    folder for persistence.

2.  **Verify the App Download**: After downloading, verify that the
    Endoscopy app is available in the `apps` folder:

    ``` bash
    !ls ~/monailabel_workspace/apps
    ```

    You should see the `endoscopy` folder listed.

### Step 4: Next Steps

Now that MONAILabel is up and running with the Endoscopy app downloaded,
you are ready to start exploring AI-assisted annotation for endoscopic
tool tracking.

In the next notebook, we will guide you through setting up CVAT and
linking it to the MONAILabel server for seamless video annotation.
